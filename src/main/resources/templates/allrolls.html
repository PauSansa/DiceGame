<!DOCTYPE html>
<html>
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <link rel="stylesheet" href="https://unpkg.com/@vectopus/atlas-icons/style.css">
    <style>
      .table-sansa{
        padding: 10%;
      }
    </style>
    <title>User Stats</title>
</head>
<body>
  <header class="d-flex flex-wrap justify-content-center py-3 mb-4 border-bottom">
    <a href="/" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto link-body-emphasis text-decoration-none">
      <svg class="bi me-2" width="40" height="32"><use xlink:href="#bootstrap"></use></svg>
      <span class="fs-4">Pau Sansa's Dice Game</span>
    </a>

    <ul class="nav nav-pills">
      <li class="nav-item"><a th:href="@{/}" class="nav-link" aria-current="page">Home</a></li>
      <li class="nav-item"><a th:href="@{/roll}" class="nav-link">Rolls</a></li>
      <li class="nav-item"><a th:href="@{/allrolls}" class="nav-link active">All Rolls</a></li>
      <li class="nav-item"><a th:href="@{/logout}" class="nav-link text-danger">Logout</a></li>
    </ul>
  </header>

  <div class="container px-4 py-5" id="featured-3">
    <div class="row align-items-center">
      <div class="col">
        <h2 class="pb-2 border-bottom"><span th:text="${user.username}"></span> Stats</h2>
      </div>
      <div class="col-auto">
        <a class="btn btn-danger rounded-pill px-3" th:href="@{/deletebyuser}">Delete all rows</a>
      </div>
    </div>
    <div class="row g-4 py-5 row-cols-1 row-cols-lg-3">
      <div class="feature col">
        <i class="at-crown-winner" style="font-size: 6vh;"></i>
        <h3 class="fs-2">Total Wins</h3>
        <p>You have <span th:text="${user.wins}"></span> wins</p>
        
      </div>
      <div class="feature col">
        <i class="at-replay-arrows-up-down" style="font-size: 6vh;"></i>
        <h3 class="fs-2">Total Rolls Played</h3>
        <p>You have been rolled <span th:text="${user.rollsPlayed}"></span> times</p>
      </div>
      <div class="feature col">
        <i class="at-winning-arrow-up" style="font-size: 6vh;"></i>
        <h3 class="fs-2">Winrate</h3>
        <p>Your winrate is <span th:text="${user.winRate}"></span>%</p>
      </div>
    </div>
  </div>
  
  <div class="table-sansa">
    <h3>Last 10 rolls</h3>
    <table class="table table-hover">
      <thead>
      <tr>
        <th scope="col">Id</th>
        <th scope="col">Dice 1</th>
        <th scope="col">Dice 2</th>
        <th scope="col">Result</th>
        <th scope="col">Rolled At</th>


      </tr>
      </thead>
      <tbody>
        <tr th:each="roll : ${rolls}" th:class="${roll.result == 'Winner' ? 'table-success' : 'table-danger'}">
            <td th:text="${roll.id}"></td>
            <td th:text="${roll.dice1}"></td>
            <td th:text="${roll.dice2}"></td>
            <td th:text="${roll.result}"></td>
            <td th:text="${roll.rolledAt}"></td>
          </tr>
      </tbody>
    </table>
  </div>

    
</body>
</html>